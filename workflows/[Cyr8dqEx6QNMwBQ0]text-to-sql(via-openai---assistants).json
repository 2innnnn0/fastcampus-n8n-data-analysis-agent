{"createdAt":"2025-08-05T23:23:24.288Z","updatedAt":"2025-08-06T08:16:57.361Z","id":"Cyr8dqEx6QNMwBQ0","name":"Text-To-SQL(via OpenAI - Assistants)","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[1920,-2336],"id":"619035b6-aa66-407c-87d3-5ef4f2e9e188","name":"Simple Memory"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[1520,-2544],"id":"8af1fd0d-b9db-476b-819f-0f05fb620b78","name":"When chat message received","webhookId":"ecb82b48-330b-40cb-a28e-1185230f924b"},{"parameters":{"resource":"assistant","assistantId":{"__rl":true,"value":"asst_wsj9CBDafI3l8rCn4GcXzAF3","mode":"list","cachedResultName":"TEXT-TO-SQL bot"},"options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[1744,-2544],"id":"d1166591-f7e9-4f63-b39d-0712b29ef686","name":"Text-To-SQL","credentials":{"openAiApi":{"id":"ledUugAWoH4Uadky","name":"(fastcampus)OpenAi account"}}},{"parameters":{"content":"![](https://raw.githubusercontent.com/2innnnn0/assets/refs/heads/master/image/datapopcorn_logo_50px.png)\n# 10ë¶„ì•ˆì— Text-To-SQL ë§Œë“¤ê¸°\n- ì¤€ë¹„ë¬¼ : OpenAI ê³„ì • í•„ìš” - https://platform.openai.com/ ì ‘ì† í›„ Payment Billing ë“±ë¡í•´ì•¼ í•¨.\n1. Chinook DB ìŠ¤í‚¤ë§ˆ [ë‹¤ìš´](https://github.com/lerocha/chinook-database/releases/download/v1.4.5/Chinook_Sqlite.sql)ë°›ê¸°.\n2. [OpenAI Assistants](https://platform.openai.com/assistants/) ë©”ë‰´ì— ë“¤ì–´ê°€ì„œ Text-to-SQL ì—ì´ì „íŠ¸ë¥¼ ë§Œë“¤ê¸°.\n\n```\n- System Inst. : ì˜¤ë¥¸ìª½ ì°¸ê³ \n- Model : gpt-4.1\n- Tools : File Searchì— 1ë²ˆì—ì„œ ë‹¤ìš´ ë°›ì€ í…ìŠ¤íŠ¸ íŒŒì¼ ì—…ë¡œë“œí•˜ê¸°. -> Vector Storeë¡œ ì €ì¥.\n- Temperature : 0 ë˜ëŠ” 0.1  (ìƒì„± ê²°ê³¼ì˜ ë¬´ì‘ìœ„ì„± ì¡°ì ˆ (0=ì™„ì „ ê²°ì •ì ) : SQLì€ ì •í•´ì§„ êµ¬ì¡°ì™€ ë¬¸ë²•ì„ ë”°ë¥´ê¸° ë•Œë¬¸ì— ë³€ë™ì„±ì´ ì—†ì–´ì•¼ í•©ë‹ˆë‹¤.)\n- Top P : 1 (ëˆ„ì  í™•ë¥  ê¸°ë°˜ í† í° í•„í„°ë§ (1=ì „ì²´ ì‚¬ìš©), ê°€ëŠ¥í•œ ëª¨ë“  í›„ë³´ í† í° ì¤‘ ê°€ì¥ ë†’ì€ í™•ë¥ ì„ ê¸°ì¤€ìœ¼ë¡œ ì„ íƒí•˜ë„ë¡ ì„¤ì •. top_p < 1ì€ ì˜ë¯¸ ì—†ì´ ì¼ë¶€ í† í°ì„ ì œì™¸í•  ìˆ˜ ìˆìŒ.)\n```\n\n3. n8nì—ì„œ OpenAI ë…¸ë“œ > Message Assistant ì„ íƒ.\n4. chat Trigger ì—°ê²° í›„ \"ì•„í‹°ìŠ¤íŠ¸ë³„ ì•¨ë²” ìˆ˜ êµ¬í•´ì¤˜.\"\n5. (ì˜µì…˜) Toolìœ¼ë¡œ Slack ì—°ê²°í•´ì„œ ì±„ë„ì— ì˜ê¸°.","height":500,"width":840},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1232,-3104],"id":"f9a53489-267e-44ca-be5f-ac7cb1974f61","name":"Sticky Note"},{"parameters":{"content":"## System Instruction\n```\në‹¹ì‹ ì€ ìˆ™ë ¨ëœ SQL ì „ë¬¸ê°€ì´ë©°, ì£¼ì–´ì§„ ìì—°ì–´ ì§ˆë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ Chinook SQLite ë°ì´í„°ë² ì´ìŠ¤ì— ëŒ€í•œ ì •í™•í•˜ê³  ìµœì í™”ëœ SQL ì¿¼ë¦¬ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n\në‹¤ìŒì€ Chinook ë°ì´í„°ë² ì´ìŠ¤ì˜ ì£¼ìš” í…Œì´ë¸”ê³¼ ê·¸ ê´€ê³„ì…ë‹ˆë‹¤:\n\n- **Artist(ArtistId, Name)**\n- **Album(AlbumId, Title, ArtistId)** â€” Artistì— ì¢…ì†ë¨\n- **Track(TrackId, Name, AlbumId, MediaTypeId, GenreId, Composer, Milliseconds, Bytes, UnitPrice)** â€” Album, Genre, MediaTypeì— ì¢…ì†ë¨\n- **Genre(GenreId, Name)**\n- **MediaType(MediaTypeId, Name)**\n- **Customer(CustomerId, FirstName, LastName, Country, Email, ...)** â€” ê³ ê° ì •ë³´\n- **Invoice(InvoiceId, CustomerId, InvoiceDate, Total, ...)**\n- **InvoiceLine(InvoiceLineId, InvoiceId, TrackId, UnitPrice, Quantity)** â€” êµ¬ë§¤ ë‚´ì—­\n- **Employee(EmployeeId, FirstName, LastName, Title, ReportsTo, ...)**\n- **Playlist(PlaylistId, Name)**\n- **PlaylistTrack(PlaylistId, TrackId)** â€” ë‹¤ëŒ€ë‹¤ ê´€ê³„ í…Œì´ë¸”\n\nğŸ“Œ ë‹¤ìŒ ì›ì¹™ì„ ë°˜ë“œì‹œ ë”°ë¥´ì‹­ì‹œì˜¤:\n1. **SQL ë¬¸ë§Œ ì¶œë ¥í•˜ì‹­ì‹œì˜¤.** ìì—°ì–´ ì„¤ëª…ì€ í¬í•¨í•˜ì§€ ë§ˆì‹­ì‹œì˜¤.\n2. ê°€ëŠ¥í•œ ê²½ìš° **JOIN**ì„ í™œìš©í•˜ì—¬ ì˜ë¯¸ ìˆëŠ” ê²°ê³¼ë¥¼ êµ¬ì„±í•˜ì‹­ì‹œì˜¤.\n3. ì‚¬ìš©ìì˜ ì§ˆë¬¸ì´ ì• ë§¤í•˜ê±°ë‚˜ ëˆ„ë½ëœ ì •ë³´ê°€ ìˆì„ ê²½ìš°, **ê°€ëŠ¥í•œ ë²”ìœ„ ë‚´ì—ì„œ ê°€ì¥ í•©ë¦¬ì ì¸ ê¸°ë³¸ê°’**ì„ ê°€ì •í•´ ì‘ì„±í•˜ì‹­ì‹œì˜¤.\n4. ë‚ ì§œ, ë¬¸ìì—´ ë“±ì˜ ì¡°ê±´ì€ í•­ìƒ ì ì ˆí•œ **í˜•ì‹ì„ ìœ ì§€**í•˜ì‹­ì‹œì˜¤. (ì˜ˆ: `'USA'`, `'2009-01-01'`)\n5. SELECT ì ˆì—ëŠ” **ëª…í™•í•˜ê³  í•´ì„ ê°€ëŠ¥í•œ ì»¬ëŸ¼ëª…(alias í¬í•¨)**ì„ ì‚¬ìš©í•˜ì‹­ì‹œì˜¤.\n6. ì§ˆë¬¸ìê°€ **Top N**, **ì •ë ¬**, **ì§‘ê³„(í•©ê³„/í‰ê· /ì¹´ìš´íŠ¸)** ë“±ì„ ìš”ì²­í•˜ë©´ ì •í™•íˆ ë°˜ì˜í•˜ì‹­ì‹œì˜¤.\n7. SQLì€ í•­ìƒ **SQLite ë¬¸ë²•**ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ì‹­ì‹œì˜¤.\n\nì˜ˆì‹œ:\nì§ˆë¬¸: \"ê°€ì¥ ë¹„ì‹¼ íŠ¸ë™ 5ê°œë¥¼ ì•Œë ¤ì¤˜\"\nì¶œë ¥:\n```sql\nSELECT Name, UnitPrice\nFROM Track\nORDER BY UnitPrice DESC\nLIMIT 5;\n```","height":640,"width":1200,"color":4},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[2160,-3104],"id":"fbc906b5-7c02-4edc-8bfd-8417e780d41a","name":"Sticky Note1"},{"parameters":{"content":"![](https://i.imgur.com/IoZ4RKK.gif)","height":180,"width":150},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1920,-3072],"id":"8e22ab4a-9585-4fcf-85a5-b2f34ce54086","name":"Sticky Note2"},{"parameters":{"content":"## Chinook Database?\n[![Chinook sample database | YugabyteDB Docs](https://tse3.mm.bing.net/th?id=OIP.ns_hFVgQ7r8jzVsHTOKPTAHaHx\\&pid=Api)](https://docs.yugabyte.com/latest/sample-data/chinook/)\n\nChinook DatabaseëŠ” ë””ì§€í„¸ ìŒì•… ìŠ¤í† ì–´ë¥¼ ëª¨ë¸ë§í•œ ì˜¤í”ˆì†ŒìŠ¤ ìƒ˜í”Œ ë°ì´í„°ë² ì´ìŠ¤ë¡œ, SQL í•™ìŠµ, ë°ì´í„° ë¶„ì„ ì‹¤ìŠµ, ORM ë„êµ¬ í…ŒìŠ¤íŠ¸, ë°ì´í„° ì‹œê°í™” ë“± ë‹¤ì–‘í•œ ìš©ë„ë¡œ í™œìš©ë©ë‹ˆë‹¤.\n---\n### ğŸ“Œ ì£¼ìš” íŠ¹ì§•\n* **ë°ì´í„° ëª¨ë¸**: ì•„í‹°ìŠ¤íŠ¸, ì•¨ë²”, íŠ¸ë™, ê³ ê°, ì§ì›, ì²­êµ¬ì„œ ë“± ì´ 11ê°œì˜ í…Œì´ë¸”ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì‹¤ì œ iTunes ë¼ì´ë¸ŒëŸ¬ë¦¬ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.\n* **ì§€ì› í”Œë«í¼**: SQLite, PostgreSQL, MySQL, SQL Server, Oracle ë“± ë‹¤ì–‘í•œ DBMSì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.\n* **ë°ì´í„° ê·œëª¨**: 15,000ê°œ ì´ìƒì˜ ë ˆì½”ë“œì™€ ë‹¤ì–‘í•œ ì œì•½ ì¡°ê±´(Primary Key, Foreign Key ë“±)ì„ í¬í•¨í•˜ê³  ìˆì–´ ê´€ê³„í˜• ë°ì´í„° ëª¨ë¸ë§ ë° ì¿¼ë¦¬ ì‹¤ìŠµì— ì í•©í•©ë‹ˆë‹¤.\n\n---\n\n### ğŸ§© í…Œì´ë¸” êµ¬ì„± ì˜ˆì‹œ\n\n* `Artist`: ì•„í‹°ìŠ¤íŠ¸ ì •ë³´\n* `Album`: ì•¨ë²” ì •ë³´\n* `Track`: íŠ¸ë™ ì •ë³´\n* `Customer`: ê³ ê° ì •ë³´\n* `Invoice`: ì²­êµ¬ì„œ ì •ë³´\n* `InvoiceLine`: ì²­êµ¬ í•­ëª© ì •ë³´\n* `Employee`: ì§ì› ì •ë³´\n* `Genre`: ì¥ë¥´ ì •ë³´\n* `MediaType`: ë¯¸ë””ì–´ ìœ í˜• ì •ë³´\n* `Playlist`: ì¬ìƒ ëª©ë¡ ì •ë³´\n* `PlaylistTrack`: ì¬ìƒ ëª©ë¡ê³¼ íŠ¸ë™ì˜ ê´€ê³„\n\n---\n\n### ğŸ“¥ ë‹¤ìš´ë¡œë“œ ë° ì„¤ì¹˜\n\nChinook DatabaseëŠ” GitHubì—ì„œ ë‹¤ì–‘í•œ DBMSìš© SQL ìŠ¤í¬ë¦½íŠ¸ì™€ í•¨ê»˜ ì œê³µë©ë‹ˆë‹¤.\n* GitHub ì €ì¥ì†Œ: ([github.com][1])\n* SQLite ë²„ì „ ë‹¤ìš´ë¡œë“œ: `Chinook_Sqlite.sqlite` íŒŒì¼ì„ í•´ë‹¹ ì €ì¥ì†Œì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\n### ğŸ¯ í™œìš© ì‚¬ë¡€\n* **SQL í•™ìŠµ**: JOIN, GROUP BY, ì„œë¸Œì¿¼ë¦¬ ë“± ë‹¤ì–‘í•œ SQL ë¬¸ë²• ì‹¤ìŠµ\n* **ë°ì´í„° ë¶„ì„**: ê³ ê° êµ¬ë§¤ íŒ¨í„´ ë¶„ì„, ì¥ë¥´ë³„ íŒë§¤ í†µê³„ ë“±\n* **ì‹œê°í™” ë„êµ¬ ì—°ë™**: Power BI, Tableau ë“±ì„ í™œìš©í•œ ë°ì´í„° ì‹œê°í™”\n* **ORM í…ŒìŠ¤íŠ¸**: Entity Framework, SQLAlchemy ë“± ORM ë„êµ¬ì˜ ê¸°ëŠ¥ ê²€ì¦\n","height":1560,"width":660,"color":3},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[2112,-2400],"id":"bd6177e4-4688-42d8-9cb7-67b26477e37c","name":"Sticky Note3"},{"parameters":{"content":"![](https://i.imgur.com/5bprhww.png)","height":392,"width":700,"color":6},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1376,-2144],"id":"bc53a2d4-8602-42c7-a46e-31ccc3b43d54","name":"Sticky Note4"},{"parameters":{"select":"channel","channelId":{"__rl":true,"value":"C435YGHAQ","mode":"list","cachedResultName":"general"},"text":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message_Text', ``, 'string') }}","otherOptions":{}},"type":"n8n-nodes-base.slackTool","typeVersion":2.3,"position":[1744,-2336],"id":"1617ae03-ee6d-4962-963e-a89e7d80f4a4","name":"Send a message in Slack","webhookId":"12e7e713-3f97-44ca-a458-8ac811cdb509","credentials":{"slackApi":{"id":"WZW1Kqym7BnJSCSZ","name":"(n8n-agent-bot) Slack account"}}}],"connections":{"Simple Memory":{"ai_memory":[[{"node":"Text-To-SQL","type":"ai_memory","index":0}]]},"When chat message received":{"main":[[{"node":"Text-To-SQL","type":"main","index":0}]]},"Send a message in Slack":{"ai_tool":[[{"node":"Text-To-SQL","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"c0326094-d5ec-4dd8-9e49-49729e67d69e","triggerCount":0,"shared":[{"createdAt":"2025-08-05T23:23:24.288Z","updatedAt":"2025-08-05T23:23:24.288Z","role":"workflow:owner","workflowId":"Cyr8dqEx6QNMwBQ0","projectId":"sjNgDrdbhRMMF6SK"}],"tags":[{"createdAt":"2025-06-25T04:00:38.130Z","updatedAt":"2025-06-25T04:00:38.130Z","id":"EyGUZypc5DKHVUyY","name":"íŒ¨ìŠ¤íŠ¸ìº í¼ìŠ¤"}]}