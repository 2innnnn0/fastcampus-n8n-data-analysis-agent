{"createdAt":"2025-09-03T02:55:57.107Z","updatedAt":"2025-09-10T10:52:04.876Z","id":"Tdq94Bmn3h8zFFLK","name":"ìë™ì°¨ ë¦¬ì½œ ë°ì´í„° ë¦¬í¬íŠ¸","active":false,"isArchived":false,"nodes":[{"parameters":{"promptType":"define","text":"={{ $json.body.recallData }}","options":{"systemMessage":"ì…ë ¥ë°›ì€ ì •ë³´ë¥¼ ì°¨ëŸ‰ë¦¬ì½œ ë¦¬í¬íŠ¸ë¡œ ë§Œë“¤ì–´ì¤˜."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.2,"position":[-1184,1696],"id":"84fabf1b-8ad6-44d4-9cb0-a40850d7f9db","name":"AI Agent"},{"parameters":{"model":{"__rl":true,"value":"gpt-4.1-mini","mode":"list","cachedResultName":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-1232,1920],"id":"30330b5e-465d-4663-840f-1e96679863f5","name":"OpenAI Chat Model"},{"parameters":{"html":"<!DOCTYPE html>\n<html lang=\"ko\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>ì°¨ëŸ‰ ë¦¬ì½œ ë³´ê³ ì„œ</title>\n  <style>\n    @page { size: A4; margin: 12mm; }\n    body {\n      font-family: 'Noto Sans KR', system-ui, sans-serif;\n      margin:0; background:#fff; color:#222; font-size:13pt; line-height:1.55;\n    }\n    .container { max-width: 185mm; margin: 0 auto; padding: 10mm; }\n    .header { display:flex; justify-content:space-between; align-items:flex-end; }\n    .title { font-size:22pt; margin:0; color:#1f2937; }\n    .date { font-size:11pt; color:#666; }\n    hr { border:0; height:2px; background:linear-gradient(90deg,#0f6fdb,#7cc4ff); margin:6mm 0; }\n\n    /* ìš”ì•½ ì„¹ì…˜ */\n    .summary { margin-bottom: 8mm; }\n    .summary p { margin:0 0 3mm; }\n    .bullets { margin:0; padding-left:16px; font-size:12.5pt; }\n    .bullets li { margin-bottom:2mm; }\n\n    /* í•µì‹¬ ì •ë³´ ì¹´ë“œ */\n    .facts {\n      border:1px solid #e5e7eb; border-radius:10px; padding:6mm; margin-bottom:8mm;\n      background:#fafafa;\n    }\n    .facts h2 { font-size:14pt; margin-top:0; color:#34495e; }\n    .kv { display:grid; grid-template-columns:30mm 1fr; row-gap:4mm; font-size:12pt; }\n    .kv dt { color:#555; }\n    .kv dd { margin:0; font-weight:600; }\n\n    /* ì‹¬ê°ë„ ë±ƒì§€ */\n    .sev { display:inline-block; padding:2px 10px; border-radius:999px; font-size:11pt; font-weight:700; }\n    .sev.high { background:#fee2e2; color:#b91c1c; }\n    .sev.med { background:#fef3c7; color:#92400e; }\n    .sev.low { background:#dcfce7; color:#166534; }\n\n    /* ì´ë¯¸ì§€ */\n    .figure { text-align:center; margin-top:8mm; }\n    .figure img { max-width:100%; height:auto; max-height:90mm; border:1px solid #eee; border-radius:8px; padding:4px; }\n    .caption { font-size:10pt; color:#666; margin-top:4px; }\n\n    /* í‘¸í„° */\n    .footer { display:flex; justify-content:space-between; font-size:10pt; color:#666; margin-top:8mm; }\n    .badge { color:#195fbf; background:#eaf3ff; border:1px solid #cfe7ff; padding:2px 6px; border-radius:6px; }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <!-- í—¤ë” -->\n    <div class=\"header\">\n      <h1 class=\"title\">ì°¨ëŸ‰ ë¦¬ì½œ ë³´ê³ ì„œ</h1>\n      <div class=\"date\">\n        {{ $json.reportDate || (new Date()).toISOString().slice(0,10) }}\n      </div>\n    </div>\n    <hr/>\n\n    <!-- ìš”ì•½ë¬¸ + bullet -->\n    <div class=\"summary\">\n      <p>\n        {{\n          (function(){\n            const raw = ($json.textOutput || '');\n            const clean = raw.replace(/[*#`]/g,'').split('[ì´ë¯¸ì§€ í™•ì¸]')[0];\n            const sents = clean.split(/[.?!]\\s+/).filter(Boolean);\n            return sents.slice(0,2).join('. ') + '.';\n          })()\n        }}\n      </p>\n      <ul class=\"bullets\">\n        <li>ì£¼ìš” ìœ„í—˜: ë³€ì† ì¼€ì´ë¸” ë¸Œë¼ì¼“ ì²´ê²° ë¶ˆëŸ‰</li>\n        <li>ì ì¬ ì˜í–¥: ë³€ì† ë ˆë²„ ì‘ë™ ë¶ˆëŠ¥ â†’ ì•ˆì „ì‚¬ê³  ìœ„í—˜</li>\n        <li>ì¡°ì¹˜ ê³„íš: ë¦¬ì½œ ì ê²€ ë° ë¬´ìƒ ìˆ˜ë¦¬</li>\n      </ul>\n    </div>\n\n    <!-- í•µì‹¬ ì •ë³´ -->\n    <div class=\"facts\">\n      <h2>ë¦¬ì½œ ê°œìš”</h2>\n      <dl class=\"kv\">\n        <dt>ì œì¡°ì‚¬</dt><dd>í˜„ëŒ€ìë™ì°¨(ì£¼)</dd>\n        <dt>ì°¨ì¢…</dt><dd>í¬í„°2 (HR)</dd>\n        <dt>ê¸°ê°„</dt><dd>2023-03-07 ~ 2023-03-08</dd>\n        <dt>ê°œì‹œì¼</dt><dd>2023-04-10</dd>\n        <dt>ë¦¬ì½œ ID</dt><dd>í¬í„°2(HR)-2023-04-10</dd>\n        <dt>ì‹¬ê°ë„</dt><dd><span class=\"sev med\">ì¤‘ê°„</span></dd>\n      </dl>\n    </div>\n\n    <!-- ì‹œê°ìë£Œ -->\n    <div class=\"figure\">\n      {{\n        (function(){\n          const img = $json.imageData || '';\n          if(!img) return `<div style=\"border:1px dashed #ccc; padding:20mm; color:#888;\">ì‹œê° ìë£Œ ì—†ìŒ</div>`;\n          const src = img.startsWith('data:') ? img : `data:image/png;base64,${img}`;\n          return `<img src=\"${src}\" alt=\"ë¦¬ì½œ ë°ì´í„° ì‹œê°í™”\">`;\n        })()\n      }}\n      <div class=\"caption\">ê·¸ë¦¼ 1. ë¦¬ì½œ ë°ì´í„° ì‹œê°í™”</div>\n    </div>\n\n    <!-- í‘¸í„° -->\n    <div class=\"footer\">\n      <span class=\"badge\">ìë™ ìƒì„± Â· n8n + GPT + Gotenberg</span>\n      <span>ë¬¸ì˜: data-team@example.com</span>\n    </div>\n  </div>\n</body>\n</html>\n"},"type":"n8n-nodes-base.html","typeVersion":1.2,"position":[-608,1696],"id":"4611d4df-1a58-4d2a-a5fe-701764f99301","name":"HTML"},{"parameters":{"assignments":{"assignments":[{"id":"2561942e-b531-4019-b328-e1bb0ed2511b","name":"textOutput","value":"={{ $json.output }}","type":"string"},{"id":"cf6d3ea0-a254-4261-9e7c-e3805c987c85","name":"imageData","value":"={{ $('Webhook').item.json.body.visualizationImage }}","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-832,1696],"id":"45ada119-c8dd-4508-8f0f-0b639477b62e","name":"Edit Fields"},{"parameters":{"method":"POST","url":"http://host.docker.internal:3000/forms/chromium/convert/html","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"parameterType":"formBinaryData","name":"files","inputDataFieldName":"data"}]},"options":{"response":{"response":{"responseFormat":"file"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-160,1696],"id":"998504b4-cd8f-4a8a-b417-afe7c11710b2","name":"convert to pdf"},{"parameters":{"operation":"toText","sourceProperty":"html","binaryPropertyName":"=data","options":{"fileName":"index.html"}},"type":"n8n-nodes-base.convertToFile","typeVersion":1.1,"position":[-384,1696],"id":"5977fbb8-1aa0-414f-acf0-c9c54093add0","name":"Convert to File"},{"parameters":{"content":"## TRIGGER\n","height":208,"width":208,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-1472,1648],"typeVersion":1,"id":"8d406d75-a97c-48bc-8b17-0ea05637fe81","name":"Sticky Note1"},{"parameters":{"content":"- AIê°€ ì…ë ¥ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³ , ìš”ì•½/ë¦¬í¬íŠ¸ í˜•íƒœë¡œ ì‘ì„±.  \n- OpenAI GPT ëª¨ë¸ì´ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©°, í”„ë¡¬í”„íŠ¸ë¥¼ í†µí•´ ìë™ìœ¼ë¡œ í…ìŠ¤íŠ¸ ë¦¬í¬íŠ¸ë¥¼ ìƒì„±.\n","height":144,"width":214,"color":5},"type":"n8n-nodes-base.stickyNote","position":[-1072,1568],"typeVersion":1,"id":"731f2c34-4a09-4b41-a1c2-baabb183bbd5","name":"Sticky Note3"},{"parameters":{"content":"- ë¦¬í¬íŠ¸ì— í¬í•¨í•  ë³€ìˆ˜ë“¤ì„ ì„¤ì •í•˜ëŠ” ë…¸ë“œ.\n- 'AIê°€ ìƒì„±í•´ì¤€ í…ìŠ¤íŠ¸'ì™€ 'ì›¹í›…ìœ¼ë¡œ ë„˜ê²¨ë°›ì€ ì‹œê°í™” ì •ë³´ ë°ì´íŠ¸'ë¡œ êµ¬ë¶„í•´ì£¼ëŠ” ë…¸ë“œ\n\n","height":144,"width":166,"color":5},"type":"n8n-nodes-base.stickyNote","position":[-784,1568],"typeVersion":1,"id":"f17bc7ce-609f-4d97-bf30-6324bddea787","name":"Sticky Note4"},{"parameters":{"content":"- AIê°€ ë§Œë“  í…ìŠ¤íŠ¸ë¥¼ HTML í…œí”Œë¦¿ìœ¼ë¡œ ë³€í™˜.  \n- ë¦¬í¬íŠ¸ê°€ ë³´ê¸° ì¢‹ì€ í˜•íƒœë¡œ êµ¬ì„±ë˜ë„ë¡ HTML êµ¬ì¡°ë¥¼ ì„¤ì •.\n","height":144,"width":160,"color":5},"type":"n8n-nodes-base.stickyNote","position":[-576,1568],"typeVersion":1,"id":"38be931a-ab86-433a-afee-b06ab25b339f","name":"Sticky Note5"},{"parameters":{"content":"Dockerì— ì„¤ì¹˜ëœ Gotenberg ì„œë²„ë¥¼ ì´ìš©í•´ HTMLì„ PDFë¡œ ë³€í™˜í•©ë‹ˆë‹¤.  \nGotenbergëŠ” API ê¸°ë°˜ ì˜¤í”ˆì†ŒìŠ¤ PDF ë³€í™˜ê¸°ì´ë©°, ì´ ì›Œí¬í”Œë¡œìš°ëŠ” HTTP ìš”ì²­ìœ¼ë¡œ ë³€í™˜ì„ ìš”ì²­í•©ë‹ˆë‹¤.\n\nğŸ›  Gotenberg ì„œë²„ëŠ” Dockerì—ì„œ ì‹¤í–‰ë˜ê³  ìˆì–´ì•¼ í•˜ë©°,\nn8nì€ http://host.docker.internal:3000 ê°™ì€ ì£¼ì†Œë¡œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.\n","height":256,"width":256,"color":5},"type":"n8n-nodes-base.stickyNote","position":[-336,1552],"typeVersion":1,"id":"460ef16e-f227-4295-9c13-d458dc00f283","name":"Sticky Note6"},{"parameters":{"content":"# ë¦¬ì½œ ì•Œë¦¼ ë°œì†¡\n\n\n","height":768,"width":912,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-1248,672],"typeVersion":1,"id":"c25c084d-f469-4cf3-9d33-975b35ae2684","name":"Sticky Note8"},{"parameters":{"fieldToSplitOut":"data","options":{}},"type":"n8n-nodes-base.splitOut","typeVersion":1,"position":[-736,640],"id":"23917e3d-06fb-4881-a0ed-40a70e2b17da","name":"Split Out"},{"parameters":{"tableId":"recall_data_test_2","fieldsUi":{"fieldValues":[{"fieldId":"recall_date","fieldValue":"={{ $json['ë¦¬ì½œê°œì‹œì¼'] }}"},{"fieldId":"recall_reason","fieldValue":"={{ $json['ë¦¬ì½œì‚¬ìœ '] }}"},{"fieldId":"production(to)","fieldValue":"={{ $json['ìƒì‚°ê¸°ê°„(ê¹Œì§€)'] }}"},{"fieldId":"production(from)","fieldValue":"={{ $json['ìƒì‚°ê¸°ê°„(ë¶€í„°)'] }}"},{"fieldId":"maker","fieldValue":"={{ $json['ì œì‘ì'] }}"},{"fieldId":"model","fieldValue":"={{ $json['ì°¨ëª…'] }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-288,736],"id":"a1eac110-f5d8-4be2-aa41-a6143590ae0c","name":"Supabase DB ì—°ë™"},{"parameters":{"compare":"selectedFields","fieldsToCompare":"['ì´ë©”ì¼']","options":{}},"type":"n8n-nodes-base.removeDuplicates","typeVersion":2,"position":[-736,1280],"id":"97f6e01f-98e1-4be3-97c2-021575c0f2d0","name":"ì¤‘ë³µ ì´ë©”ì¼ ì œê±°"},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE","mode":"list","cachedResultName":"ìë™ì°¨ ë¦¬ì½œ ì •ë³´ ","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Recall","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit#gid=0"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":[],"schema":[{"id":"ë¦¬ì½œê°œì‹œì¼","displayName":"ë¦¬ì½œê°œì‹œì¼","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ë¦¬ì½œì‚¬ìœ ","displayName":"ë¦¬ì½œì‚¬ìœ ","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ìƒì‚°ê¸°ê°„(ê¹Œì§€)","displayName":"ìƒì‚°ê¸°ê°„(ê¹Œì§€)","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ìƒì‚°ê¸°ê°„(ë¶€í„°)","displayName":"ìƒì‚°ê¸°ê°„(ë¶€í„°)","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ì œì‘ì","displayName":"ì œì‘ì","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"ì°¨ëª…","displayName":"ì°¨ëª…","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[-512,640],"id":"f11ca109-c8b8-4f55-a3a3-5198113f695c","name":"'Recall'ì‹œíŠ¸ì— ì ì¬"},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE","mode":"list","cachedResultName":"Recall_data","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1577570114,"mode":"list","cachedResultName":"Customer","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit#gid=1577570114"},"columns":{"mappingMode":"defineBelow","value":{"ì´ë©”ì¼":"={{ $json['ì´ë©”ì¼'] }}","car model":"={{ $json['ì°¨ëŸ‰ëª…'] }}","purchase date":"={{ $json['êµ¬ë§¤ì¼ì'] }}"},"matchingColumns":[],"schema":[{"id":"car model","displayName":"car model","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"purchase date","displayName":"purchase date","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"ì´ë©”ì¼","displayName":"ì´ë©”ì¼","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"submittedAt","displayName":"submittedAt","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"formMode","displayName":"formMode","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"ì°¨ëŸ‰ëª…","displayName":"ì°¨ëŸ‰ëª…","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true},{"id":"êµ¬ë§¤ì¼ì","displayName":"êµ¬ë§¤ì¼ì","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[-1184,960],"id":"42e31d4d-49fe-46fa-ad29-15f580ccb9b7","name":"'Customer' ì‹œíŠ¸ì— ì ì¬"},{"parameters":{"documentId":{"__rl":true,"value":"1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE","mode":"list","cachedResultName":"Recall_data","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1577570114,"mode":"list","cachedResultName":"Customer","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit#gid=1577570114"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[-1184,1280],"id":"1276bb6a-be20-4fa7-bb8c-52bf277124d4","name":"2_Customer","executeOnce":true,"credentials":{"googleSheetsOAuth2Api":{"id":"LUHbrnvA5uAuGJG7","name":"Sehee"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"194d97e2-1018-47fa-ad6b-b99f9e1c29bc","leftValue":"={{ $('1_Recall').item.json['ë¦¬ì½œê°œì‹œì¼'] }}","rightValue":"={{ $json['purchase date'] }}","operator":{"type":"dateTime","operation":"after"}},{"id":"b7ce0c44-7529-4958-ba70-8f69e095a994","leftValue":"={{ $('1_Recall').item.json['ì°¨ëª…'] }}","rightValue":"={{ $json['car model'] }}","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-960,1280],"id":"f5b137ef-288f-4261-b729-09964235d1b7","name":"ë‘ ì‹œíŠ¸ ë¹„êµ","executeOnce":false,"retryOnFail":false,"alwaysOutputData":false},{"parameters":{"rule":{"interval":[{"field":"weeks","triggerAtDay":[1],"triggerAtHour":9}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-1408,640],"id":"6701a28e-6faf-46bf-a4ff-0e6d375d85eb","name":"ë§¤ì¼ 9am"},{"parameters":{"operation":"clear","documentId":{"__rl":true,"value":"1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE","mode":"list","cachedResultName":"Recall_data","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Recall","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit#gid=0"}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.7,"position":[-1184,640],"id":"ce9d3461-e0bb-490c-aa52-2c6e1f3f4408","name":"ì¤‘ë³µ ì œê±°"},{"parameters":{"sendTo":"={{ $json['ì´ë©”ì¼'] }}","subject":"CAR RECALL ALARM","emailType":"text","message":"=- ì°¨ì¢… : {{ $('1_Recall').item.json['ì°¨ëª…'] }}\n- ë¦¬ì½œì‚¬ìœ  : {{ $('1_Recall').item.json['ë¦¬ì½œì‚¬ìœ '] }}\n- ìƒì‚°ê¸°ê°„ : {{ $('1_Recall').item.json['ìƒì‚°ê¸°ê°„(ë¶€í„°)'] }} ~ {{ $('1_Recall').item.json['ìƒì‚°ê¸°ê°„(ê¹Œì§€)'] }}","options":{}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[-512,1184],"id":"599bc41b-b7fd-4308-93bb-7e581e535a34","name":"ë©”ì¼ ë°œì†¡","webhookId":"16dee804-6922-41f4-8a82-5861c28ffcb0"},{"parameters":{"formTitle":"ì°¨ëŸ‰ ì •ë³´ ì…ë ¥","formDescription":"ì°¨ëŸ‰ ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”","formFields":{"values":[{"fieldLabel":"ì°¨ëŸ‰ëª…","placeholder":"ì˜µí‹°ë¨¸ìŠ¤í”„ë¼ì„","requiredField":true},{"fieldLabel":"êµ¬ë§¤ì¼ì","fieldType":"date","requiredField":true},{"fieldLabel":"ì´ë©”ì¼","fieldType":"email","placeholder":"test@naver.com","requiredField":true}]},"options":{}},"type":"n8n-nodes-base.formTrigger","typeVersion":2.2,"position":[-1408,960],"id":"3e36ad44-1186-48fd-93cc-d074c8ef65c3","name":"ì‚¬ìš©ì ì •ë³´ ì…ë ¥","webhookId":"fb7fdd6f-9166-4e3f-9d29-a45e717d0fb8"},{"parameters":{"pollTimes":{"item":[{"hour":9}]},"documentId":{"__rl":true,"value":"1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE","mode":"list","cachedResultName":"ìë™ì°¨ ë¦¬ì½œ ì •ë³´ ","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Recall","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1u7a27P4M3r3sIZ-kNeg-S3qnGZ0yx0UrKSUALGn-VmE/edit#gid=0"},"event":"rowAdded","options":{}},"type":"n8n-nodes-base.googleSheetsTrigger","typeVersion":1,"position":[-1408,1280],"id":"10f2b7e6-8372-49dd-bf41-b1f892d3b5f8","name":"1_Recall","credentials":{"googleSheetsTriggerOAuth2Api":{"id":"OEujjIdCg8ygfn56","name":"Google Sheets Trigger account"}}},{"parameters":{"operation":"delete","tableId":"recall_data_test_2","matchType":"allFilters","filters":{"conditions":[{"keyName":"recall_date","condition":"eq","keyValue":"={{ $json['ë¦¬ì½œê°œì‹œì¼'] }}"},{"keyName":"recall_reason","condition":"eq","keyValue":"={{ $json['ë¦¬ì½œì‚¬ìœ '] }}"},{"keyName":"maker","condition":"eq","keyValue":"={{ $json['ì œì‘ì'] }}"},{"keyName":"model","condition":"eq","keyValue":"={{ $json['ì°¨ëª…'] }}"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[-288,544],"id":"f22fb0ca-d577-4701-84d0-3a7040b8474e","name":"ì¤‘ë³µì œê±°"},{"parameters":{"content":"## ë¦¬ì½œ ë°ì´í„° ìˆ˜ì§‘","height":224,"width":880,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-1440,592],"typeVersion":1,"id":"557dc2fe-8712-4ca1-a18e-29bca0f19e1e","name":"Sticky Note"},{"parameters":{"content":"## ì‚¬ìš©ì ë°ì´í„° ìˆ˜ì§‘","height":224,"width":480,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-1456,896],"typeVersion":1,"id":"a83b6e3a-ad43-47b0-bcc4-987c7de37e78","name":"Sticky Note10"},{"parameters":{"content":"## ë¦¬ì½œ ì•Œë¦¼ ë©”ì¼ ë°œì†¡","height":256,"width":1168,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-1472,1200],"typeVersion":1,"id":"2af34dfc-200d-4a21-8b51-80f79a9f5761","name":"Sticky Note11"},{"parameters":{"public":true,"initialMessages":"ì•ˆë…•í•˜ì„¸ìš”. ì €ëŠ” ì°¨ëŸ‰ ë¦¬ì½œ ì •ë³´ ì¡°íšŒë¥¼ ì „ë¬¸ìœ¼ë¡œ í•˜ëŠ” AI Agentì…ë‹ˆë‹¤.\n\níŠ¹ì • ì°¨ëŸ‰ì˜ ë¦¬ì½œ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì‹¶ê±°ë‚˜, ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ë§ì”€í•´ì£¼ì„¸ìš”.\n\n","options":{"subtitle":"ì•ˆë…•í•˜ì„¸ìš”! ì°¨ëŸ‰ ë¦¬ì½œ ì •ë³´ë¥¼ ì•Œë ¤ë“œë¦¬ëŠ” ì±—ë´‡ì…ë‹ˆë‹¤. ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”!","title":"AI Car Recall ğŸ¤–"}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[-1408,208],"id":"fe975122-3367-45ee-981a-b7886908726b","name":"When chat message received","webhookId":"6352f430-ab04-4667-9b06-b5b523a47d32"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.toolSerpApi","typeVersion":1,"position":[-928,432],"id":"b6d6d4b8-75fd-495f-8c81-088ed64b363b","name":"SerpAPI"},{"parameters":{"hasOutputParser":true,"options":{"systemMessage":"={\n  \"role\": \"ìë™ì°¨ ë¦¬ì½œ ì „ë¬¸ê°€ AI\",\n  \"task\": \"ìë™ì°¨ ë¦¬ì½œ ìš”ì•½ ë³´ê³ ì„œ ì‘ì„±\",\n  \"input_field\": \"ì°¨ëª…\",\n  \"data_source\": \"Supabase\",\n  \"output_fields\": [\n    \"ë¦¬ì½œ ì‚¬ìœ \",\n    \"ë¦¬ì½œ ê°œì‹œì¼\",\n    \"ìƒì‚°ê¸°ê°„ (ì‹œì‘ ~ ì¢…ë£Œ)\",\n    \"ì œì‘ì\"\n  ],\n  \"no_data_message\": \"í•´ë‹¹ ì°¨ëŸ‰ì— ëŒ€í•œ ë¦¬ì½œ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.\",\n  \"language\": \"í•œêµ­ì–´\",\n  \"style\": \"ì´í•´í•˜ê¸° ì‰¬ìš´ ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½\"\n}\n\nì¶”ê°€ì ìœ¼ë¡œ, ì°¨ëª…ì´ ì™„ì „íˆ ì¼ì¹˜í•˜ì§€ ì•Šë”ë¼ë„ 2ê¸€ì ì´ìƒ ì¼ì¹˜í•˜ë©´ í•´ë‹¹ ë¦¬ì½œ ê±´ì— ëŒ€í•´ ëŒ€ë‹µí•´ì¤˜.\n\në„ˆê°€ ê°€ì ¸ì˜¬ supabaseì˜ DBì˜ ì¹¼ëŸ¼ëª…ì€ 'recall_date', 'recall_reason', 'production(from)', 'production(to)', 'maker', 'model'ë¡œ ë˜ì–´ ìˆì„ ê±°ì•¼.\nì»¬ë ´ì´ ì–´ë””ì— ë§¤í•‘ë˜ëŠ”ì§€ëŠ” ì•Œì•„ì„œ ì¶”ë¡  ê°€ëŠ¥í•  ê±°ë¼ê³  ìƒê°í•´. ì˜ ë¶€íƒí•´. \n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-1008,208],"id":"6faf989e-db77-4ddf-b344-2db2d46395d3","name":"AI Agent1"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[-1056,432],"id":"0c747701-98a7-431c-9437-317d0da7b16b","name":"Simple Memory"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[-1184,432],"id":"408214d0-8d3a-4149-a749-98d5cedb64aa","name":"OpenAI"},{"parameters":{"httpMethod":"POST","path":"=recall","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-1424,1696],"id":"181ec094-63f2-4254-a06f-38ef15eb903d","name":"Webhook","webhookId":"398f98fe-c58a-4f20-b553-87e5832009ca","executeOnce":false,"retryOnFail":false},{"parameters":{"sendTo":"={{ $('Webhook').item.json.body.email }}","subject":"Recall Report","emailType":"text","message":"ì•ˆë…•í•˜ì„¸ìš”. ë¦¬ì½œë³´ê³ ì„œ ë³´ë‚´ë“œë¦½ë‹ˆë‹¤.","options":{"attachmentsUi":{"attachmentsBinary":[{}]}}},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[96,1696],"id":"89b95262-5e45-488a-8701-6c86e3faebad","name":"ë¦¬í¬íŠ¸ ë°œì†¡","webhookId":"9310b498-3e8a-4f97-92fe-417899878b52"},{"parameters":{"content":"# ë¦¬ì½œ ë¦¬í¬íŠ¸ ë°œì†¡","height":304,"width":1728,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-1472,1552],"typeVersion":1,"id":"121361be-ad6d-4ee7-a2c0-ed8bcb532ef9","name":"Sticky Note14"},{"parameters":{"content":"# ë¦¬ì½œ ì±—ë´‡","height":480,"width":912,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-1440,80],"typeVersion":1,"id":"c2120103-3dc3-4546-8e5d-781ac6894e39","name":"Sticky Note15"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[-672,432],"id":"6d093ff4-1623-4346-b3d4-df821742c038","name":"Structured Output Parser"},{"parameters":{"content":"## TASK\n","height":208,"width":1104,"color":7},"type":"n8n-nodes-base.stickyNote","position":[-1184,1648],"typeVersion":1,"id":"2dc0dca3-3d14-4545-8c34-e22789554034","name":"Sticky Note16"},{"parameters":{"content":"## TARGET\n","height":208,"width":224,"color":7},"type":"n8n-nodes-base.stickyNote","position":[0,1648],"typeVersion":1,"id":"217715cd-f09f-40f4-b062-655c79692dd5","name":"Sticky Note17"},{"parameters":{"method":"POST","url":"https://kapi.kakao.com/v2/api/talk/memo/default/send","authentication":"genericCredentialType","genericAuthType":"oAuth2Api","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/x-www-form-urlencoded;charset=utf-8"}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"template_object","value":"={\n  \"object_type\": \"text\",\n  \"text\": \"ì•ˆë…•í•˜ì„¸ìš”! ë¦¬ì½œ ì•ˆë‚´ë´‡ì…ë‹ˆë‹¤.\\nê³ ê°ë‹˜ì˜ ì°¨ëŸ‰({{ $json['car model'] }})ì— ëŒ€í•œ ë¦¬ì½œ ì •ë³´ê°€ í™•ì¸ë˜ì–´ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.\\n\\nêµ¬ë§¤ì¼ì: {{ $json['purchase date'] }}\\n\\nìì„¸í•œ ë‚´ìš©ì€ ìë™ì°¨ ë¦¬ì½œì„¼í„° ì›¹ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.\\n\\në¦¬ì½œ ì±—ë´‡ ë°”ë¡œê°€ê¸°:\\nhttps://d2bc4b92c08a.ngrok-free.app/webhook/6352f430-ab04-4667-9b06-b5b523a47d32/chat\"\n,\n  \"link\": {\n    \"web_url\": \"https://www.car.go.kr/vehicle/RecallSearch.jsp\",\n    \"mobile_web_url\": \"https://www.car.go.kr/vehicle/RecallSearch.jsp\"\n  },\n  \"buttons\": [\n    {\n      \"title\": \"ìì„¸íˆ ë³´ê¸°\",\n      \"link\": {\n        \"web_url\": \"https://www.car.go.kr/vehicle/RecallSearch.jsp\",\n        \"mobile_web_url\": \"https://www.car.go.kr/vehicle/RecallSearch.jsp\"\n      }\n    }\n  ]\n}\n"},{}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-512,1376],"id":"17a23047-854a-41c9-a53e-db9da80408cb","name":"ì¹´ì¹´ì˜¤í†¡ ë°œì†¡"},{"parameters":{"url":"=https://api.odcloud.kr/api/3048950/v1/uddi:096d9d09-883c-4027-be00-b0915d273ce5","sendQuery":true,"queryParameters":{"parameters":[{"name":"page","value":"1"},{"name":"perPage","value":"30"},{"name":"serviceKey","value":"jVwm8WYdMpGK4BqfwpN6eZvd0gaG5oJ5HihWrIhNwhaEdvvtLZHVaChaUQh8fO5GaWlRqxFROPnItSiO7/lf+A=="}]},"sendHeaders":true,"headerParameters":{"parameters":[{"name":"accept","value":"*/*"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-960,640],"id":"20659d58-9ea0-4c32-b0b0-a64590b2baf2","name":"êµ­í† êµí†µë¶€_ë¦¬ì½œAPI í˜¸ì¶œ"},{"parameters":{"operation":"get","tableId":"recall_data_test_2","filters":{"conditions":[{"keyName":"model","keyValue":"={{ $json.chatInput }}"}]}},"type":"n8n-nodes-base.supabaseTool","typeVersion":1,"position":[-800,432],"id":"3ce1263f-c8e4-460f-abdd-c65a976510b6","name":"Supabase DB"}],"connections":{"AI Agent":{"main":[[{"node":"Edit Fields","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"HTML":{"main":[[{"node":"Convert to File","type":"main","index":0}]]},"Edit Fields":{"main":[[{"node":"HTML","type":"main","index":0}]]},"convert to pdf":{"main":[[{"node":"ë¦¬í¬íŠ¸ ë°œì†¡","type":"main","index":0}]]},"Convert to File":{"main":[[{"node":"convert to pdf","type":"main","index":0}]]},"Split Out":{"main":[[{"node":"'Recall'ì‹œíŠ¸ì— ì ì¬","type":"main","index":0}]]},"ì¤‘ë³µ ì´ë©”ì¼ ì œê±°":{"main":[[{"node":"ë©”ì¼ ë°œì†¡","type":"main","index":0},{"node":"ì¹´ì¹´ì˜¤í†¡ ë°œì†¡","type":"main","index":0}]]},"'Recall'ì‹œíŠ¸ì— ì ì¬":{"main":[[{"node":"ì¤‘ë³µì œê±°","type":"main","index":0},{"node":"Supabase DB ì—°ë™","type":"main","index":0}]]},"2_Customer":{"main":[[{"node":"ë‘ ì‹œíŠ¸ ë¹„êµ","type":"main","index":0}]]},"ë‘ ì‹œíŠ¸ ë¹„êµ":{"main":[[{"node":"ì¤‘ë³µ ì´ë©”ì¼ ì œê±°","type":"main","index":0}]]},"ë§¤ì¼ 9am":{"main":[[{"node":"ì¤‘ë³µ ì œê±°","type":"main","index":0}]]},"ì¤‘ë³µ ì œê±°":{"main":[[{"node":"êµ­í† êµí†µë¶€_ë¦¬ì½œAPI í˜¸ì¶œ","type":"main","index":0}]]},"ì‚¬ìš©ì ì •ë³´ ì…ë ¥":{"main":[[{"node":"'Customer' ì‹œíŠ¸ì— ì ì¬","type":"main","index":0}]]},"1_Recall":{"main":[[{"node":"2_Customer","type":"main","index":0}]]},"When chat message received":{"main":[[{"node":"AI Agent1","type":"main","index":0}]]},"SerpAPI":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"AI Agent1","type":"ai_memory","index":0}]]},"OpenAI":{"ai_languageModel":[[{"node":"AI Agent1","type":"ai_languageModel","index":0}]]},"Webhook":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"AI Agent1","type":"ai_outputParser","index":0}]]},"êµ­í† êµí†µë¶€_ë¦¬ì½œAPI í˜¸ì¶œ":{"main":[[{"node":"Split Out","type":"main","index":0}]]},"Supabase DB":{"ai_tool":[[{"node":"AI Agent1","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"89168bbd-ae1d-43ca-a637-014ae0f9c805","triggerCount":0,"shared":[{"createdAt":"2025-09-03T02:55:57.107Z","updatedAt":"2025-09-03T02:55:57.107Z","role":"workflow:owner","workflowId":"Tdq94Bmn3h8zFFLK","projectId":"sjNgDrdbhRMMF6SK"}],"tags":[{"createdAt":"2025-06-25T04:00:38.130Z","updatedAt":"2025-06-25T04:00:38.130Z","id":"EyGUZypc5DKHVUyY","name":"íŒ¨ìŠ¤íŠ¸ìº í¼ìŠ¤"}]}